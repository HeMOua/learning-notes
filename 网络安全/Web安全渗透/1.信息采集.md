# 1.信息采集

## 域名信息

浏览网站过程：（从DNS服务器获得指定域名对应的IP地址）

> **whois是用来查询域名的IP以及所有者等信息的传输协议**。简单说，whois就是一个用来查询域名是否已经被注册，以及注册域名的详细信息的数据库（如域名所有人、域名注册商）
>
> **不同域名后缀的whois信息需要到不同的whois数据库查询**。如.com的whois数据库和.edu的就不同。每个域名或IP的WHOIS信息由对应的管理机构保存，例如，以.com结尾的域名的WHOIS信息由.com域名运营商VeriSign管理，中国国家顶级域名.cn域名由CNNIC（中国互联网络信息中心）管理
>
> WHOIS协议。其基本内容是，先向服务器的TCP端口43建立一个连接，发送查询关键字并加上回车换行，然后接收服务器的查询结果。

通过whois查询可以获得域名注册者邮箱地址等信息。一般情况下对于中小型网站域名注册者就是网站管理员。利用搜索引擎对Whois查询到的信息进行搜索，获取更多域名注册者的个人信息

### Web接口查询

（搜索whois查询）

+ https://whois.aliyun.com/
+ https://www.whois365.com/cn/
+ http://whois.chinaz.com/
+ https://whois.aizhan.com/

### Whois命令行查询

+ 在Kali linux下自带了Whois查询工具，通过命令whois域名进行查询 `whois [域名]`

## 备案信息

> ICP备案介绍：Internet Content Provider网络内容提供商。
>
>  《互联网信息服务管理办法》指出互联网信息服务分为经营性和非经营性两类。国家对经营性互联网信息服务实行许可制度；对非经营性互联网信息服务实行备案制度。未取得许可或者未履行备案手续的，不得从事互联网信息服务。在中华人民共和国境内提供非经营性互联网信息服务，应当依法履行备案手续。未经国家机关单位许可备案，不得在中华人民共和国境内从事非经营性互联网信息服务。
>
> 备案好处：为了防止在网上从事非法的网站经营活动，打击不良互联网信息的传播，如果网站不备案的话，很有可能被查处以后关停。

### Web接口查询

+ Web接口查询（搜索备案查询）：
  + http://www.beianbeian.com/
  + http://www.miitbeian.gov.cn/publish/query/indexFirst.action
  + https://www.tianyancha.com/

## 子域名

顶级域名：是".com"、 ".net"、".org"、".cn"等等

子域名(Subdomain Name)，凡顶级域名前加前缀的都是该顶级域名的子域名，而子域名根据技术的多少分为二级子域名，三级子域名以及多级子域名。

> 我国在国际互联网络信息中心正式注册并运行的顶级域名是.cn,这也是我国的一级域名。
>
> 在顶级域名之下，我国的二级域名又分为类别域名和行政区域名两类。
>
> 类别域名共6个，包括用于
>
> + 科研机构的.ac
> + 用于工商金融企业的.com;
> + 用于教育机构的.edu
> + 用于政府部门门的.gov;
> + 用于互联网络信息中心和运行中心的.net
> + 用于非盈利组织的.org
>
> 而行政区域名有34个，分别对应于我国各省、自治区和直辖市。

子域名是某个主域的二级域名或者多级域名，在防御措施严密情况下无法直接拿下主域，那么就可以采用迂回战术拿下子域名，然后无限靠近主域。

### 子域名挖掘工具

+ Maltego CE
+ wydomain
+ subDomainsBrute
+ dnsmaper
+ Layer子域名挖掘机

### 搜索引擎挖掘

搜索引擎挖掘如：在Google中输入site:sina.com，速度慢

### 第三方网站查询

+ http://tool.chinaz.com/subdomain
+ https://dnsdumpster.com/

### 证书透明度公开日志

证书上面可能会登记一些子域名信息

+ https://crt.sh
+ http://censys.io

### 其他网站

+ https://phpinfo.me/domain
+ http://dns.aizhan.com

### 刷洞思路

针对某个具体SRC进行挖洞，如果直接针对主域进行渗透测试很可能是很难达到挖掘的效果。此时可以搜集对应的子域名，然后批量探测某些具体漏洞，从而更加快速容易的发现一些漏洞。之后将漏洞提交对应SRC获取奖金。

针对补天刷洞思路:对应没有指定厂商的刷洞，可以根据某些具体漏洞，通过URL采集获取目标，编写探测脚本批量探测，快速高效的刷洞。

注意:无论如何，都要保持警惕，不要触及不该触及的内容，不要影响公司业务，只做漏洞探测内容，确定存在漏洞即可。适可而止。

挖洞高峰期:在互联网上曝出某些新漏洞的时候，会有大量的该漏洞提交到漏洞平台获取奖金。