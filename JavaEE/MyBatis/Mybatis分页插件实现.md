# Mybatis分页插件实现



```sql
select * from xxx limit start_index, size
```

## 分页插件

Mybatis通过提供插件机制，让我们可以根据自己的需要去增强 Mybatis 的功能。需要注意的是，如果没有完全理解 Mybatis 的运行原理和插件的工作方式，最好不要使用插件，因为它会改变系底层的工作逻辑，给系统带来很大的影响。

Mybatis 的插件可以在不修改原来的代码的情况下，通过拦截的方式，改变四大核心对象的行为，比如处理参数，处理SQL，处理结果。

+ Mybatis 插件典型适用场景

  + 分页功能：mybatis 的分页默认是基于内存分页的(查出所有，再截取)，数据量大的情况下效率较低，不过使用mybatis插件可以改变该行为，只需要拦截StatementHandler 类的prepare方法，改变要执行的SQL语句为分页语句即可；

  + 公共字段统一赋值：一般业务系统都会有创建者，创建时间，修改者，修改时间四个字段，对于这四个字段的赋值，实际上可以在DAO层统一拦截处理，可以用ybatis插件拦截
    Executor类的update方法，对相关参数进行统一赋值即可；

  + 性能监控：对于SQL语句执行的性能监控，可以通过拦截Executor类的update,.query等方法，用日志记录每个方法执行的时间；

  + 其它：其实ybatis扩展性还是很强的，基于插件机制，基本上可以控制SQL执行的各个阶段，如执行阶段，参数处理阶段，语法构建阶段，结果集处理阶段，具体
    可以根据项目业务来实现对应业务逻辑。